#create new vm from an existing vm
#sudo v irsh create open.xml
# Destroy a vm in disk file .img type 
function destroy_vm(){
echo "Destroy VM $NAME"
rm -rf /home/ssd/$NAME.img
virsh destroy $NAME
virsh undefine $NAME
}

# Show list of VMs
function listVM(){
vm=`virsh list --all | awk '{print $2}' | grep -v Name` # | awk '{print $2}' <-- remove blank lines
echo $vm
}

# Return number of VMs
function vmNo(){
vm=`listVM | wc -w`
return $vm
}

# Show VM's disk path, the $1 is the vm name in virsh
function vmDisk(){
vmPath=`virsh domblklist $1 | grep vda | awk '{print $2}'`
echo $vmPath
}

# Return VM's disk size, the $1 is the LVM disk name
function vmDiskSize(){
vmSize=`lvs | grep $1 | awk '{print $4}' | awk '{print substr($0,0,index($0,".")-1)}'`
retusn $vmSize
}
